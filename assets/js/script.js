jQuery(function(a){var e=a("html"),s=a("body");function t(){a(".menu-list-item a").each(function(){var e=a(this);e.removeClass("current"),e.attr("href")==window.location.href&&e.addClass("current")})}t();var n=a("#menu").width();function i(){e.removeClass("menu-active"),n>a(window).width()-160?e.addClass("menu-hidden"):(e.removeClass("menu-hidden"),e.removeClass("menu-active"),a("#menu-button").removeClass("active"))}function o(){a("pre code").each(function(e,s){hljs.highlightBlock(s);var t=a(this),n=t.html().split(/\n/).length,i=[];for(e=1;e<n;e++)i+='<span class="line">'+e+"</span>";t.parent().addClass("codeblock").append('<div class="lines">'+i+"</div>")})}function r(){a("#wrapper").fitVids()}function d(){if("undefined"!=typeof disqus&&document.getElementById("disqus_thread")){if(window.DISQUS)return DISQUS.reset({reload:!0,config:function(){this.page.identifier=location.pathname,this.page.url=location.origin+location.pathname}});a.ajax({type:"GET",url:"//"+disqus+".disqus.com/embed.js",dataType:"script",cache:!0})}else a(".post-comments").css({display:"none"})}function l(){if("/"!==location.pathname){var a=s.find("article"),e=a.find(".post-reading-time");a.readingTime({readingTimeTarget:e.find(".estimated-reading-time"),wordCountTarget:e.find(".word-count"),error:function(){e.find(".post-reading-time").remove()}})}}function c(){a('a[href^="'+window.location.origin+'"], .post-image a, .post-title a, .post-more a, .post-meta a, .post-tags a, #pagination a').each(function(){var e=a(this);e.hasClass("rss")||e.hasClass("subscribe")||(e.addClass("js-ajax-link"),e.attr("href").indexOf("page")>-1&&e.addClass("js-archive-index"),e.attr("href")==window.location.origin&&e.addClass("js-show-index"),e.attr("href").indexOf("tag")>-1&&e.addClass("js-tag-index"),e.attr("href").indexOf("author")>-1&&e.addClass("js-author-index"))})}i(),a(window).on({resize:function(){i()},orientationchange:function(){i()}}),s.on("click","#menu-button",function(){a(this).toggleClass("active"),e.toggleClass("menu-active")}),o(),r(),d(),l(),c();var u=window.History,h=!1,p=a("#ajax-container");if(!u.enabled)return!1;u.Adapter.bind(window,"statechange",function(){e.addClass("loading");var n=u.getState();a.get(n.url,function(n){var u=a(n),f=a("#ajax-container",u).contents(),m=n.match(/<title>(.*?)<\/title>/)[1];p.fadeOut(500,function(){e.hasClass("push-next")&&(e.removeClass("push-next"),e.addClass("pushed-next")),e.hasClass("push-prev")&&(e.removeClass("push-prev"),e.addClass("pushed-prev")),document.title=a("<textarea/>").html(m).text(),p.html(f),s.removeClass(),s.addClass(a("#body-class").attr("class")),NProgress.done(),p.fadeIn(500),a(document).scrollTop(0),setTimeout(function(){e.removeClass("loading")},50),c(),o(),r(),d(),t(),l(),i(),h=!1})})}),s.on("click",".js-ajax-link",function(s){s.preventDefault();var t=a(this);if(t.hasClass("post-nav-item")||t.hasClass("pagination-item")?((t.hasClass("post-nav-next")||t.hasClass("pagination-next"))&&(e.removeClass("pushed-prev"),e.addClass("push-next")),(t.hasClass("post-nav-prev")||t.hasClass("pagination-prev"))&&(e.removeClass("pushed-next"),e.addClass("push-prev"))):(e.removeClass("pushed-next"),e.removeClass("pushed-prev")),!1===h){var n=u.getState(),i=a(this).prop("href"),o=a(this).attr("title")||null;i.replace(/\/$/,"")!==n.url.replace(/\/$/,"")&&(h=!0,e.addClass("loading"),NProgress.start(),u.pushState({},o,i))}}),s.on("click","#post-index .post .js-ajax-link",function(){var e=a(this).parents(".post");e.addClass("initial"),setTimeout(function(){e.addClass("active")},1)})});