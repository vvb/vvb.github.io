
<head>
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <title>Auto-generate python script for tasks done on UI</title>
    <meta name="description" content="">

    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" type="text/css" href="../assets/css/screen.css">
    <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Roboto:100,300">

    <link rel="canonical" href="index.html">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <link rel="amphtml" href="amp/index.html">
    
    <meta property="og:site_name" content="Servers | Containers | Management">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Auto-generate python script for tasks done on UI">
    <meta property="og:description" content="Welcome the convert_to_ucs_python API. Assumption: User knows to do an operation via the JAVA based UCSM GUI  UCSM UI and convert_to_ucs_python should be launched on the same client machine. Basic Idea: launch the JAVA based UCSM UI launch the python shell and invoke convert_">
    <meta property="og:url" content="http://localhost:2368/auto-generate-python-script-for-tasks-done-on-ui/">
    <meta property="article:published_time" content="2016-11-07T23:22:28.000Z">
    <meta property="article:modified_time" content="2016-11-07T23:22:28.000Z">
    <meta property="article:tag" content="ucsmsdk">
    <meta property="article:tag" content="ucspython">
    
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Auto-generate python script for tasks done on UI">
    <meta name="twitter:description" content="Welcome the convert_to_ucs_python API. Assumption: User knows to do an operation via the JAVA based UCSM GUI  UCSM UI and convert_to_ucs_python should be launched on the same client machine. Basic Idea: launch the JAVA based UCSM UI launch the python shell and invoke convert_">
    <meta name="twitter:url" content="http://localhost:2368/auto-generate-python-script-for-tasks-done-on-ui/">
    <meta name="twitter:label1" content="Written by">
    <meta name="twitter:data1" content="vvb">
    <meta name="twitter:label2" content="Filed under">
    <meta name="twitter:data2" content="ucsmsdk, ucspython">
    <meta name="twitter:site" content="@vvb__">
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "Servers | Containers | Management",
        "logo": "http://localhost:2368/ghost/img/ghosticon.jpg"
    },
    "author": {
        "@type": "Person",
        "name": "vvb",
        "url": "http://localhost:2368/author/vvb/",
        "sameAs": []
    },
    "headline": "Auto-generate python script for tasks done on UI",
    "url": "http://localhost:2368/auto-generate-python-script-for-tasks-done-on-ui/",
    "datePublished": "2016-11-07T23:22:28.000Z",
    "dateModified": "2016-11-07T23:22:28.000Z",
    "keywords": "ucsmsdk, ucspython",
    "description": "Welcome the convert_to_ucs_python API. Assumption: User knows to do an operation via the JAVA based UCSM GUI  UCSM UI and convert_to_ucs_python should be launched on the same client machine. Basic Idea: launch the JAVA based UCSM UI launch the python shell and invoke convert_",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "http://localhost:2368"
    }
}
    </script>

    <meta name="generator" content="Ghost 0.11">
    <link rel="alternate" type="application/rss+xml" title="Servers | Containers | Management" href="../rss/index.html">
</head>
<body class="post-template tag-ucsmsdk tag-ucspython">

    

<main class="content" role="main">

    <article class="post tag-ucsmsdk tag-ucspython">

        <header class="post-header">
            <a id="blog-logo" href="../">
                    Servers | Containers | Management
            </a>
        </header>


        

        <h1 class="post-title">Auto-generate python script for tasks done on UI</h1>

        <span class="post-meta">Published on <time datetime="2016-11-08">November 08 2016</time> by vvb, Tagged in: <span class="tag-list"><a href="../tag/ucsmsdk/">ucsmsdk</a>, <a href="../tag/ucspython/">ucspython</a></span></span>

        <section class="post-content">
            <p>Welcome the <code>convert_to_ucs_python</code> API.</p>

<p>Assumption:</p>

<p>User knows to do an operation via the JAVA based UCSM GUI <br>
UCSM UI and <code>convert_to_ucs_python</code> should be launched on the same client machine.</p>

<p>Basic Idea:</p>

<ul>
<li>launch the JAVA based UCSM UI</li>
<li>launch the python shell and invoke <code>convert_to_ucs_python</code></li>
<li>perform the desired operation on the UI</li>
<li><code>convert_to_ucs_python</code> monitors the operation and generates equivalent python script for the same.</li>
</ul>

<p>How it works:</p>

<p>UCSM GUI logs all the activities that are performed via it, and the python shell monitors that log to generate the equivalent python script. Since the logging is local to the machine where the UI is running, <code>convert_to_ucs_python</code> also must run on the same machine. <br>
Sample Usage:</p>

<p>Step 1 - Launch the UCSM GUI.</p>

<pre><code>from ucsmsdk.utils.ucsguilaunch import ucs_gui_launch  
from ucsmsdk.ucshandle import UcsHandle

# Login to the server
handle = UcsHandle(&lt;ip&gt;, &lt;username&gt;, &lt;password&gt;)  
handle.login()

# launch the UCSM GUI
ucs_gui_launch(handle)  
</code></pre>

<p>Step 2 - Run <code>convert_to_ucs_python</code></p>

<p>The CLI will go into a listen mode until Ctrl+C is pressed again. Until then it prints equivalent script for operations done on the UI.</p>

<p>Print the equivalent script to console</p>

<pre><code>from ucsmsdk.utils.converttopython import convert_to_ucs_python

convert_to_ucs_python()  
</code></pre>

<p><br>
Print the equivalent script to console, also print the XMLs that the UI sends out</p>

<pre><code>from ucsmsdk.utils.converttopython import convert_to_ucs_python

convert_to_ucs_python(dump_xml=True)  
</code></pre>

<p>Output the script to a file</p>

<pre><code>from ucsmsdk.utils.converttopython import convert_to_ucs_python

file_path = r”/home/user/pythoncode.py”

convert_to_ucs_python(dump_to_file=True, dump_file_path=file_path)  
</code></pre>

<p>XML to python</p>

<pre><code>xml_str=’‘’&lt;configConfRename  
                dn=”org-root/ls-ra1” 
                inNewName=”ra2” 
                inHierarchical=”false”&gt; 
                &lt;/configConfRename&gt;’‘’

convert_to_ucs_python(xml=True, request=xml_str)  
</code></pre>

<p>note:</p>

<p>The path of UCSM UI logs is differs based on the OS and so sometimes the <code>convert_to_ucs_python</code> API may not be able to autodetect the logfiles that it needs to function. The following workaround can be applied in those cases,</p>

<p>Manually find the path to which UCSM UI logs</p>

<pre><code>$ sudo find / -name '.ucsm' 
./Library/Application Support/Oracle/Java/Deployment/log/.ucsm 
$
</code></pre>

<p>Run <code>convert_to_ucs_python</code> by specifying the log_path</p>

<pre><code>from ucsmsdk.utils.converttopython import convert_to_ucs_python

convert_to_ucs_python(gui_log=True, path=&lt;path that was found above&gt;)  
</code></pre>
        </section>

        <footer class="post-footer">

            <section class="share">
                <h4>Share this post</h4>
                <a class="icon-twitter" href="http://twitter.com/share?text=Auto-generate%20python%20script%20for%20tasks%20done%20on%20UI&amp;url=http://localhost:2368/auto-generate-python-script-for-tasks-done-on-ui/" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <span class="hidden">Twitter</span>
                </a>
                <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:2368/auto-generate-python-script-for-tasks-done-on-ui/" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <span class="hidden">Facebook</span>
                </a>
                <a class="icon-google-plus" href="https://plus.google.com/share?url=http://localhost:2368/auto-generate-python-script-for-tasks-done-on-ui/" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <span class="hidden">Google+</span>
                </a>
            </section>

        </footer>


    </article>

</main>

    <footer class="site-footer">
        <!--<a class="subscribe icon-feed" href="http://localhost:2368/rss/"><span class="tooltip">Subscribe!</span></a>-->
        <div class="inner">
             <section class="copyright">All content copyright © <a href="../">Servers | Containers | Management</a>.</section>
             <section class="poweredby"><a class="icon-ghost" href="http://ghost.org">Ghost</a> using the <a href="http://justinklemm.com/ice-breaker-theme-ghost/">Ice Breaker</a> theme.</section>
        </div>
    </footer>

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-78616097-1', 'auto');
  ga('send', 'pageview');

</script>

</body>
